"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8361],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return c}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=p(n),c=r,k=u["".concat(s,".").concat(c)]||u[c]||m[c]||i;return n?a.createElement(k,o(o({ref:t},d),{},{components:n})):a.createElement(k,o({ref:t},d))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},6955:function(e,t,n){n.d(t,{a:function(){return r},F:function(){return i}});var a=n(7294),r=function(e){e.children,e.color;return a.createElement("span",{style:{color:"#ED8936",fontSize:"0.7rem",fontWeight:"bold",position:"relative",bottom:"4px"}},"REQUIRED")},i=function(e){e.children,e.color;return a.createElement("span",{style:{color:"#718096",fontSize:"0.7rem",fontWeight:"bold",position:"relative",bottom:"4px"}},"optional")}},4241:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return p},metadata:function(){return d},toc:function(){return m},default:function(){return c}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=n(6955),l=["components"],s={title:"Stats API reference"},p=void 0,d={unversionedId:"stats-api",id:"stats-api",title:"Stats API reference",description:"The Plausible Stats API offers a way to retrieve your stats programmatically. It is a read-only interface to present historical",source:"@site/docs/stats-api.md",sourceDirName:".",slug:"/stats-api",permalink:"/docs/stats-api",editUrl:"https://github.com/plausible/docs/edit/master/docs/stats-api.md",tags:[],version:"current",frontMatter:{title:"Stats API reference"},sidebar:"someSidebar",previous:{title:"Proxying Plausible through Caddy",permalink:"/docs/proxy/guides/caddy"},next:{title:"Events API reference",permalink:"/docs/events-api"}},m=[{value:"Concepts",id:"concepts",children:[{value:"Metrics",id:"metrics",children:[],level:3},{value:"Time periods",id:"time-periods",children:[],level:3},{value:"Properties",id:"properties",children:[{value:"Custom props",id:"custom-props",children:[],level:4}],level:3},{value:"Filtering",id:"filtering",children:[],level:3}],level:2},{value:"Endpoints",id:"endpoints",children:[{value:"GET /api/v1/stats/realtime/visitors",id:"get-apiv1statsrealtimevisitors",children:[{value:"Parameters",id:"parameters",children:[],level:4}],level:3},{value:"GET /api/v1/stats/aggregate",id:"get-apiv1statsaggregate",children:[{value:"Parameters",id:"parameters-1",children:[],level:4}],level:3},{value:"GET /api/v1/stats/timeseries",id:"get-apiv1statstimeseries",children:[{value:"Parameters",id:"parameters-2",children:[],level:4}],level:3},{value:"GET /api/v1/stats/breakdown",id:"get-apiv1statsbreakdown",children:[{value:"Parameters",id:"parameters-3",children:[],level:4}],level:3}],level:2},{value:"Examples of common queries",id:"examples-of-common-queries",children:[{value:"Top pages",id:"top-pages",children:[],level:3},{value:"Number of visitors to a specific page",id:"number-of-visitors-to-a-specific-page",children:[],level:3},{value:"Monthly traffic from Google",id:"monthly-traffic-from-google",children:[],level:3},{value:"Breakdown custom event by custom props",id:"breakdown-custom-event-by-custom-props",children:[],level:3}],level:2}],u={toc:m};function c(e){var t=e.components,n=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"The Plausible Stats API offers a way to retrieve your stats programmatically. It is a read-only interface to present historical\nand real-time stats only. Take a look at our ",(0,i.kt)("a",{parentName:"p",href:"/docs/events-api"},"events API")," if you want to send pageviews or custom events to our backend and our ",(0,i.kt)("a",{parentName:"p",href:"/docs/sites-api"},"sites API")," if you want to manage your sites through the API."),(0,i.kt)("p",null,"The API accepts GET requests with query parameters and returns standard HTTP responses along with a JSON-encoded body. All API requests must be made over HTTPS.\nCalls made over plain HTTP will fail. API requests without authentication will also fail."),(0,i.kt)("p",null,"Each request must be authenticated with an API key using the Bearer Token method. You can obtain an API key for your account by going to your user\nsettings page ",(0,i.kt)("a",{parentName:"p",href:"https://plausible.io/settings"},"plausible.io/settings"),"."),(0,i.kt)("p",null,"API keys have a rate limit of 600 requests per hour by default. If you have special needs for more requests, please contact us to request more capacity."),(0,i.kt)("p",null,"The easiest way to explore the API is by using our Postman collection. Just define your ",(0,i.kt)("inlineCode",{parentName:"p"},"TOKEN")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"SITE_ID")," variables and you'll have an executable API reference ready to go."),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://app.getpostman.com/run-collection/32c111c4f6d2cccef9dd"},(0,i.kt)("img",{parentName:"a",src:"https://run.pstmn.io/button.svg",alt:"Run in Postman"}))),(0,i.kt)("h2",{id:"concepts"},"Concepts"),(0,i.kt)("p",null,"Querying the Plausible API will feel familiar if you have used time-series databases before. You cannot query individual records from\nour stats database. You can only request aggregated metrics over a certain time period."),(0,i.kt)("p",null,"Each request requires a ",(0,i.kt)("inlineCode",{parentName:"p"},"site_id")," parameter which is the domain of your site as configured in Plausible. If you're unsure, navigate to your site\nsettings in Plausible and grab the value of the ",(0,i.kt)("inlineCode",{parentName:"p"},"domain")," field."),(0,i.kt)("h3",{id:"metrics"},"Metrics"),(0,i.kt)("p",null,"You can specify a ",(0,i.kt)("inlineCode",{parentName:"p"},"metrics")," option in the query, to choose the metrics for each instance returned. See here for a full overview of ",(0,i.kt)("a",{parentName:"p",href:"/metrics-definitions"},"metrics and their definitions"),". The metrics currently supported in Stats API are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"visitors")," - The number of unique visitors"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"pageviews")," - The number of pageview events"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"bounce_rate")," - Bounce rate percentage"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"visit_duration")," - Visit duration in seconds"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"events")," - The number of events (pageviews + custom events)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"visits")," - The number of visits/sessions")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The number of visits/sessions is currently exclusive in the Stats API. It is not displayed in your Plausible dashboard. "))),(0,i.kt)("h3",{id:"time-periods"},"Time periods"),(0,i.kt)("p",null,"The options are identical for each endpoint that supports configurable time periods. Each period\nis relative to a ",(0,i.kt)("inlineCode",{parentName:"p"},"date")," parameter. The date should follow the standard ISO-8601 format. When not specified, the ",(0,i.kt)("inlineCode",{parentName:"p"},"date")," field defaults to ",(0,i.kt)("inlineCode",{parentName:"p"},"today(site.timezone)"),".\nAll time calculations on our backend are done in the time zone that the site is configured in."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"12mo,6mo")," - Last n calendar months relative to ",(0,i.kt)("inlineCode",{parentName:"li"},"date")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"month")," - The calendar month that ",(0,i.kt)("inlineCode",{parentName:"li"},"date")," falls into"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"30d,7d")," - Last n days relative to ",(0,i.kt)("inlineCode",{parentName:"li"},"date")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"day")," - Stats for the full day specified in ",(0,i.kt)("inlineCode",{parentName:"li"},"date")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"custom")," - Provide a custom range in the ",(0,i.kt)("inlineCode",{parentName:"li"},"date")," parameter.")),(0,i.kt)("p",null,"When using a custom range, the ",(0,i.kt)("inlineCode",{parentName:"p"},"date")," parameter expects two ISO-8601 formatted dates joined with a comma as follows ",(0,i.kt)("inlineCode",{parentName:"p"},"?period=custom&date=2021-01-01,2021-01-31"),".\nStats will be returned for the whole date range inclusive of the start and end dates."),(0,i.kt)("h3",{id:"properties"},"Properties"),(0,i.kt)("p",null,"Each pageview and custom event in our database has some predefined ",(0,i.kt)("em",{parentName:"p"},"properties")," associated with it. In other analytics tools, these\nare often referred to as ",(0,i.kt)("em",{parentName:"p"},"dimensions")," as well. Properties can be used for filtering and breaking down your stats to drill into\nmore depth. Here's the full list of properties we collect automatically:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Property"),(0,i.kt)("th",{parentName:"tr",align:null},"Example"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"event:name"),(0,i.kt)("td",{parentName:"tr",align:null},"pageview"),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the event triggered. ",(0,i.kt)("inlineCode",{parentName:"td"},"pageview")," is a reserved event name but custom events can be named anything.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"event:page"),(0,i.kt)("td",{parentName:"tr",align:null},"/blog/remove-google-analytics"),(0,i.kt)("td",{parentName:"tr",align:null},"Pathname of the page where the event is triggered")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"visit:entry_page"),(0,i.kt)("td",{parentName:"tr",align:null},"/home"),(0,i.kt)("td",{parentName:"tr",align:null},"Page on which the visit session started (landing page)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"visit:exit_page"),(0,i.kt)("td",{parentName:"tr",align:null},"/home"),(0,i.kt)("td",{parentName:"tr",align:null},"Page on which the visit session ended (last page viewed)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"visit:source"),(0,i.kt)("td",{parentName:"tr",align:null},"Twitter"),(0,i.kt)("td",{parentName:"tr",align:null},"Visit source, populated from an url query parameter tag (",(0,i.kt)("inlineCode",{parentName:"td"},"utm_source"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"source")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"ref"),") or the ",(0,i.kt)("inlineCode",{parentName:"td"},"Referer")," HTTP header.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"visit:referrer"),(0,i.kt)("td",{parentName:"tr",align:null},"t.co/fzWTE9OTPt"),(0,i.kt)("td",{parentName:"tr",align:null},"Raw ",(0,i.kt)("inlineCode",{parentName:"td"},"Referer")," header without ",(0,i.kt)("inlineCode",{parentName:"td"},"http://"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"http://")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"www."))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"visit:utm_medium"),(0,i.kt)("td",{parentName:"tr",align:null},"social"),(0,i.kt)("td",{parentName:"tr",align:null},"Raw value of the ",(0,i.kt)("inlineCode",{parentName:"td"},"utm_medium")," query param on the entry page")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"visit:utm_source"),(0,i.kt)("td",{parentName:"tr",align:null},"twitter"),(0,i.kt)("td",{parentName:"tr",align:null},"Raw value of the ",(0,i.kt)("inlineCode",{parentName:"td"},"utm_source")," query param on the entry page")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"visit:utm_campaign"),(0,i.kt)("td",{parentName:"tr",align:null},"profile"),(0,i.kt)("td",{parentName:"tr",align:null},"Raw value of the ",(0,i.kt)("inlineCode",{parentName:"td"},"utm_campaign")," query param on the entry page")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"visit:utm_content"),(0,i.kt)("td",{parentName:"tr",align:null},"banner"),(0,i.kt)("td",{parentName:"tr",align:null},"Raw value of the ",(0,i.kt)("inlineCode",{parentName:"td"},"utm_content")," query param on the entry page")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"visit:utm_term"),(0,i.kt)("td",{parentName:"tr",align:null},"keyword"),(0,i.kt)("td",{parentName:"tr",align:null},"Raw value of the ",(0,i.kt)("inlineCode",{parentName:"td"},"utm_term")," query param on the entry page")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"visit:device"),(0,i.kt)("td",{parentName:"tr",align:null},"Desktop"),(0,i.kt)("td",{parentName:"tr",align:null},"Device type. Possible values are ",(0,i.kt)("inlineCode",{parentName:"td"},"Desktop"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"Laptop"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"Tablet")," and ",(0,i.kt)("inlineCode",{parentName:"td"},"Mobile"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"visit:browser"),(0,i.kt)("td",{parentName:"tr",align:null},"Chrome"),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the browser vendor. Most popular ones are ",(0,i.kt)("inlineCode",{parentName:"td"},"Chrome"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"Safari")," and ",(0,i.kt)("inlineCode",{parentName:"td"},"Firefox"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"visit:browser_version"),(0,i.kt)("td",{parentName:"tr",align:null},"88.0.4324.146"),(0,i.kt)("td",{parentName:"tr",align:null},"Version number of the browser used by the visitor")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"visit:os"),(0,i.kt)("td",{parentName:"tr",align:null},"Mac"),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the operating system. Most popular ones are ",(0,i.kt)("inlineCode",{parentName:"td"},"Mac"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"Windows"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"iOS")," and ",(0,i.kt)("inlineCode",{parentName:"td"},"Android"),". Linux distributions are reported separately")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"visit:os_version"),(0,i.kt)("td",{parentName:"tr",align:null},"10.6"),(0,i.kt)("td",{parentName:"tr",align:null},"Version number of the operating system used by the visitor")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"visit:country"),(0,i.kt)("td",{parentName:"tr",align:null},"US"),(0,i.kt)("td",{parentName:"tr",align:null},"ISO 3166-1 alpha-2 code of the visitor country")))),(0,i.kt)("h4",{id:"custom-props"},"Custom props"),(0,i.kt)("p",null,"In addition to props that are collected automatically, you can also query for ",(0,i.kt)("a",{parentName:"p",href:"/custom-event-goals#using-custom-props"},"custom properties"),".\nTo filter or break down by a custom property, use the key ",(0,i.kt)("inlineCode",{parentName:"p"},"event:props:<custom_prop_name>"),". ",(0,i.kt)("a",{parentName:"p",href:"#breakdown-custom-event-by-custom-props"},"See example")," for how to use it."),(0,i.kt)("p",null,"Currently clients are limited to filtering or breaking down on just one custom property at a time. Custom prop filters and breakdowns\ncannot be combined arbitrarily. We are aware of this issue and we have plans to fix it, but we rely on our database to support some\nnew features to fix this issue."),(0,i.kt)("h3",{id:"filtering"},"Filtering"),(0,i.kt)("p",null,"Most endpoints support a ",(0,i.kt)("inlineCode",{parentName:"p"},"filters")," query parameter to drill down into your data. Currently, only simple equality filters are supported."),(0,i.kt)("p",null,"An equality filter can be specified with url-encoded ",(0,i.kt)("inlineCode",{parentName:"p"},"=="),". Filters can be joined together with ",(0,i.kt)("inlineCode",{parentName:"p"},";")," which applies a logical\n",(0,i.kt)("inlineCode",{parentName:"p"},"AND")," operator to the filters. Here's a filter expression combining two filters:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"visit:browser==Firefox;visit:country==France\n")),(0,i.kt)("p",null,"You can join values together with a ",(0,i.kt)("inlineCode",{parentName:"p"},"|")," to express an IN filter. The filter will match if the key is\nin any of the values. For example, the following filter:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"visit:country==France|Germany\n")),(0,i.kt)("p",null,"Would match both visitors from both France and Germany."),(0,i.kt)("h2",{id:"endpoints"},"Endpoints"),(0,i.kt)("h3",{id:"get-apiv1statsrealtimevisitors"},"GET /api/v1/stats/realtime/visitors"),(0,i.kt)("p",null,"This endpoint returns the number of current visitors on your site. A current visitor is defined as a visitor who triggered a pageview on your site\nin the last 5 minutes."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Try it yourself"',title:'"Try',it:!0,'yourself"':!0},"curl 'https://plausible.io/api/v1/stats/realtime/visitors?site_id=$SITE_ID'\n  -H \"Authorization: Bearer ${TOKEN}\"\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},"21\n")),(0,i.kt)("h4",{id:"parameters"},"Parameters"),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"site_id")," ",(0,i.kt)(o.a,{mdxType:"Required"})),(0,i.kt)("p",null,"Domain of your site on Plausible."),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"get-apiv1statsaggregate"},"GET /api/v1/stats/aggregate"),(0,i.kt)("p",null,"This endpoint aggregates metrics over a certain time period. If you are familiar with the Plausible dashboard, this endpoint corresponds to\nthe top row of stats that include ",(0,i.kt)("inlineCode",{parentName:"p"},"Unique Visitors"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Pageviews"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Bounce rate")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Visit duration"),". You can retrieve any number and combination\nof these metrics in one request."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Try it yourself"',title:'"Try',it:!0,'yourself"':!0},"curl 'https://plausible.io/api/v1/stats/aggregate?site_id=$SITE_ID&period=6mo&metrics=visitors,pageviews,bounce_rate,visit_duration' \\\n  -H \"Authorization: Bearer ${TOKEN}\"\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'{\n  "results": {\n    "bounce_rate": {\n        "value": 53.0\n    },\n    "pageviews": {\n        "value": 673814\n    },\n    "visit_duration": {\n        "value": 86.0\n    },\n    "visitors": {\n        "value": 201524\n    }\n  }\n}\n')),(0,i.kt)("h4",{id:"parameters-1"},"Parameters"),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"site_id")," ",(0,i.kt)(o.a,{mdxType:"Required"})),(0,i.kt)("p",null,"Domain of your site on Plausible."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"period")," ",(0,i.kt)(o.F,{mdxType:"Optional"})),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"#time-periods"},"time periods"),". If not specified, it will default to ",(0,i.kt)("inlineCode",{parentName:"p"},"30d"),"."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"metrics")," ",(0,i.kt)(o.F,{mdxType:"Optional"})),(0,i.kt)("p",null,"List of metrics to aggregate. Valid options are ",(0,i.kt)("inlineCode",{parentName:"p"},"visitors"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"pageviews"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"bounce_rate"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"visit_duration"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"visits")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"events"),". If not specified, it will default to ",(0,i.kt)("inlineCode",{parentName:"p"},"visitors"),"."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"compare")," ",(0,i.kt)(o.F,{mdxType:"Optional"})),(0,i.kt)("p",null,"Off by default. You can specify ",(0,i.kt)("inlineCode",{parentName:"p"},"compare=previous_period")," to calculate the percent difference with the previous period for each metric. The previous period will be of the exact same length as specified in the ",(0,i.kt)("inlineCode",{parentName:"p"},"period")," parameter."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"filters")," ",(0,i.kt)(o.F,{mdxType:"Optional"})),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"#filtering"},"filtering")),(0,i.kt)("h3",{id:"get-apiv1statstimeseries"},"GET /api/v1/stats/timeseries"),(0,i.kt)("p",null,"This endpoint provides timeseries data over a certain time period. If you are familiar with the Plausible dashboard, this endpoint corresponds to\nthe main visitor graph."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Try it yourself"',title:'"Try',it:!0,'yourself"':!0},"curl 'https://plausible.io/api/v1/stats/timeseries?site_id=$SITE_ID&period=6mo'\n  -H \"Authorization: Bearer ${TOKEN}\"\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'{\n  "results": [\n    {\n      "date": "2020-08-01",\n      "visitors": 36085\n    },\n    {\n      "date": "2020-09-01",\n      "visitors": 27688\n    },\n    {\n      "date": "2020-10-01",\n      "visitors": 71615\n    },\n    {\n      "date": "2020-11-01",\n      "visitors": 31440\n    },\n    {\n      "date": "2020-12-01",\n      "visitors": 35804\n    },\n    {\n      "date": "2021-01-01",\n      "visitors": 0\n    }\n  ]\n}\n')),(0,i.kt)("h4",{id:"parameters-2"},"Parameters"),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"site_id")," ",(0,i.kt)(o.a,{mdxType:"Required"})),(0,i.kt)("p",null,"Domain of your site on Plausible."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"period")," ",(0,i.kt)(o.F,{mdxType:"Optional"})),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"#time-periods"},"time periods"),". If not specified, it will default to ",(0,i.kt)("inlineCode",{parentName:"p"},"30d"),"."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"filters")," ",(0,i.kt)(o.F,{mdxType:"Optional"})),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"#filtering"},"filtering")),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"metrics")," ",(0,i.kt)(o.F,{mdxType:"Optional"})),(0,i.kt)("p",null,"Comma-separated list of metrics to show for each time bucket. Valid options are ",(0,i.kt)("inlineCode",{parentName:"p"},"visitors"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"pageviews"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"bounce_rate"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"visit_duration")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"visits"),". If not\nspecified, it will default to ",(0,i.kt)("inlineCode",{parentName:"p"},"visitors"),"."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"interval")," ",(0,i.kt)(o.F,{mdxType:"Optional"})),(0,i.kt)("p",null,"Choose your reporting interval. Valid options are ",(0,i.kt)("inlineCode",{parentName:"p"},"date")," (always) and ",(0,i.kt)("inlineCode",{parentName:"p"},"month")," (when specified period is longer than one calendar month). Defaults to\n",(0,i.kt)("inlineCode",{parentName:"p"},"month")," for ",(0,i.kt)("inlineCode",{parentName:"p"},"6mo")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"12mo"),", otherwise falls back to ",(0,i.kt)("inlineCode",{parentName:"p"},"date"),"."),(0,i.kt)("h3",{id:"get-apiv1statsbreakdown"},"GET /api/v1/stats/breakdown"),(0,i.kt)("p",null,"This endpoint allows you to break down your stats by some property. If you are familiar with SQL family databases, this endpoint corresponds to\nrunning ",(0,i.kt)("inlineCode",{parentName:"p"},"GROUP BY")," on a certain property in your stats, then ordering by the count."),(0,i.kt)("p",null,"Check out the ",(0,i.kt)("a",{parentName:"p",href:"#properties"},"properties")," section for a reference of all the properties you can use in this query."),(0,i.kt)("p",null,"This endpoint can be used to fetch data for ",(0,i.kt)("inlineCode",{parentName:"p"},"Top sources"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Top pages"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Top countries")," and similar reports."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Try it yourself"',title:'"Try',it:!0,'yourself"':!0},"curl 'https://plausible.io/api/v1/stats/breakdown?site_id=$SITE_ID&period=6mo&property=visit:source&metrics=visitors,bounce_rate&limit=5' \\\n  -H \"Authorization: Bearer ${TOKEN}\"\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'{\n  "results": [\n    {\n        "bounce_rate": 49.0,\n        "source": "(Direct / None)",\n        "visitors": 94932\n    },\n    {\n        "bounce_rate": 75.0,\n        "source": "Hacker News",\n        "visitors": 22540\n    },\n    {\n        "bounce_rate": 58.0,\n        "source": "Google",\n        "visitors": 16909\n    },\n    {\n        "bounce_rate": 62.0,\n        "source": "Twitter",\n        "visitors": 7477\n    },\n    {\n        "bounce_rate": 56.0,\n        "source": "indiehackers.com",\n        "visitors": 4518\n    }\n  ]\n}\n')),(0,i.kt)("h4",{id:"parameters-3"},"Parameters"),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"site_id")," ",(0,i.kt)(o.a,{mdxType:"Required"})),(0,i.kt)("p",null,"Domain of your site on Plausible."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"property")," ",(0,i.kt)(o.a,{mdxType:"Required"})),(0,i.kt)("p",null,"Which property to break down the stats by. Valid options are listed in the ",(0,i.kt)("a",{parentName:"p",href:"#properties"},"properties")," section above."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"period")," ",(0,i.kt)(o.F,{mdxType:"Optional"})),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"#time-periods"},"time periods"),". If not specified, it will default to ",(0,i.kt)("inlineCode",{parentName:"p"},"30d"),"."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"metrics")," ",(0,i.kt)(o.F,{mdxType:"Optional"})),(0,i.kt)("p",null,"Comma-separated list of metrics to show for each item in breakdown. Valid options are ",(0,i.kt)("inlineCode",{parentName:"p"},"visitors"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"pageviews"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"bounce_rate"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"visit_duration"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"visits")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"events"),". If not\nspecified, it will default to ",(0,i.kt)("inlineCode",{parentName:"p"},"visitors"),"."),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"limit")," ",(0,i.kt)(o.F,{mdxType:"Optional"})),(0,i.kt)("p",null,"Limit the number of results. Defaults to 100."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"page")," ",(0,i.kt)(o.F,{mdxType:"Optional"})),(0,i.kt)("p",null,"Number of the page, used to paginate results. Importantly, the page numbers start from 1 not 0."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"filters")," ",(0,i.kt)(o.F,{mdxType:"Optional"})),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"#filtering"},"filtering")),(0,i.kt)("h2",{id:"examples-of-common-queries"},"Examples of common queries"),(0,i.kt)("h3",{id:"top-pages"},"Top pages"),(0,i.kt)("p",null,"Let's say you want to show a similar report to the ",(0,i.kt)("inlineCode",{parentName:"p"},"Top pages")," report in the Plausible UI. You can do this by calling the\n",(0,i.kt)("inlineCode",{parentName:"p"},"/api/v1/stats/breakdown")," endpoint and specify ",(0,i.kt)("inlineCode",{parentName:"p"},"event:page")," as the property to group by."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Top pages"',title:'"Top','pages"':!0},"curl 'https://plausible.io/api/v1/stats/breakdown?site_id=$SITE_ID&period=6mo&property=event:page&limit=5'\n  -H \"Authorization: Bearer ${TOKEN}\"\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'{\n  "results": [\n    {\n      "page": "/",\n      "visitors": 94298\n    },\n    {\n      "page": "/blog/open-source-licenses",\n      "visitors": 18803\n    },\n    {\n      "page": "/plausible.io",\n      "visitors": 20485\n    },\n    {\n      "page": "/self-hosted-web-analytics",\n      "visitors": 22236\n    },\n    {\n      "page": "/sites",\n      "visitors": 32386\n    }\n  ]\n}\n')),(0,i.kt)("h3",{id:"number-of-visitors-to-a-specific-page"},"Number of visitors to a specific page"),(0,i.kt)("p",null,"Let's say you want to get the number of visitors to a specific page on your website like ",(0,i.kt)("inlineCode",{parentName:"p"},"/order/confirmation"),". This can be achieved by\nfiltering your stats on the ",(0,i.kt)("inlineCode",{parentName:"p"},"event:page")," property:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Visitors to /order/confirmation"',title:'"Visitors',to:!0,'/order/confirmation"':!0},"curl 'https://plausible.io/api/v1/stats/aggregate?site_id=$SITE_ID&period=6mo&filters=event:page%3D%3D%2Forder%2Fconfirmation'\n  -H \"Authorization: Bearer ${TOKEN}\"\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'{\n  "results": {\n    "visitors": {\n        "value": 1480\n    }\n  }\n}\n')),(0,i.kt)("h3",{id:"monthly-traffic-from-google"},"Monthly traffic from Google"),(0,i.kt)("p",null,"As a second example, let's imagine we want to analyze our SEO efforts for the last half year.\nTo graph your traffic from Google over time, you can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"timeseries")," endpoint with a time period ",(0,i.kt)("inlineCode",{parentName:"p"},"6mo")," and\nfilter expression ",(0,i.kt)("inlineCode",{parentName:"p"},"visit:source==Google"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Monthly traffic from Google"',title:'"Monthly',traffic:!0,from:!0,'Google"':!0},"curl 'https://plausible.io/api/v1/stats/timeseries?site_id=$SITE_ID&period=6mo&filters=visit:source%3D%3DGoogle' \\\n  -H \"Authorization: Bearer ${TOKEN}\"\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'{\n  "results": [\n    {\n        "date": "2020-09-01",\n        "visitors": 2962\n    },\n    {\n        "date": "2020-10-01",\n        "visitors": 4974\n    },\n    {\n        "date": "2020-11-01",\n        "visitors": 5119\n    },\n    {\n        "date": "2020-12-01",\n        "visitors": 5397\n    },\n    {\n        "date": "2021-01-01",\n        "visitors": 7167\n    },\n    {\n        "date": "2021-02-01",\n        "visitors": 5802\n    }\n]\n}\n')),(0,i.kt)("h3",{id:"breakdown-custom-event-by-custom-props"},"Breakdown custom event by custom props"),(0,i.kt)("p",null,"A more advanced use-case where custom events are used along with custom props. Let's say you have a ",(0,i.kt)("inlineCode",{parentName:"p"},"Download")," custom event along with\na custom property called ",(0,i.kt)("inlineCode",{parentName:"p"},"method"),". You can get a breakdown of download methods with the following query:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Breakdown of download methods"',title:'"Breakdown',of:!0,download:!0,'methods"':!0},"curl 'https://plausible.io/api/v1/stats/breakdown?site_id=$SITE_ID&period=6mo&property=event:props:method&filters=event:name%3D%3DDownload'\n  -H \"Authorization: Bearer ${TOKEN}\"\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Response"',title:'"Response"'},'{\n    "results": [\n        {\n            "method": "HTTP",\n            "visitors": 1477\n        },\n        {\n            "method": "Magnet",\n            "visitors": 370\n        }\n    ]\n}\n')),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You can can use GET ",(0,i.kt)("a",{parentName:"p",href:"https://plausible.io/api/health"},"https://plausible.io/api/health")," endpoint to monitor the status of our API"))))}c.isMDXComponent=!0}}]);