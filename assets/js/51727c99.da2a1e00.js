"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6153],{3905:function(e,t,o){o.d(t,{Zo:function(){return u},kt:function(){return d}});var n=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):s(s({},t),e)),o},u=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=c(o),d=r,y=p["".concat(l,".").concat(d)]||p[d]||h[d]||a;return o?n.createElement(y,s(s({ref:t},u),{},{components:o})):n.createElement(y,s({ref:t},u))}));function d(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,s=new Array(a);s[0]=p;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var c=2;c<a;c++)s[c]=o[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,o)}p.displayName="MDXCreateElement"},7912:function(e,t,o){o.r(t),o.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return u},toc:function(){return h},default:function(){return d}});var n=o(7462),r=o(3366),a=(o(7294),o(3905)),s=o(4996),i=["components"],l={title:"Search Console integration"},c=void 0,u={unversionedId:"google-search-console-integration",id:"google-search-console-integration",title:"Search Console integration",description:"In 2012, Google stopped including search terms in the Referer header when people click on a Google search. They only send Google as the referrer source instead. This means that Plausible cannot automatically access search terms that lead users to your site.",source:"@site/docs/google-search-console-integration.md",sourceDirName:".",slug:"/google-search-console-integration",permalink:"/docs/google-search-console-integration",editUrl:"https://github.com/plausible/docs/edit/master/docs/google-search-console-integration.md",tags:[],version:"current",frontMatter:{title:"Search Console integration"},sidebar:"someSidebar",previous:{title:"UTM tags and other query parameters",permalink:"/docs/manual-link-tagging"},next:{title:"Top Pages",permalink:"/docs/top-pages"}},h=[{value:"Add your site to the Google Search Console",id:"add-your-site-to-the-google-search-console",children:[],level:2},{value:"Verify your ownership of the website",id:"verify-your-ownership-of-the-website",children:[],level:2},{value:"Allow Plausible Analytics to access your Search Console",id:"allow-plausible-analytics-to-access-your-search-console",children:[],level:2},{value:"Select property to pull keywords from",id:"select-property-to-pull-keywords-from",children:[{value:"I get the &quot;Invalid Grant&quot; error",id:"i-get-the-invalid-grant-error",children:[],level:3},{value:"I see no Search Console properties in my Plausible account",id:"i-see-no-search-console-properties-in-my-plausible-account",children:[],level:3}],level:2},{value:"Check your search query data in Plausible Analytics",id:"check-your-search-query-data-in-plausible-analytics",children:[{value:"I don&#39;t see Google search query data in my dashboard",id:"i-dont-see-google-search-query-data-in-my-dashboard",children:[],level:3},{value:"Search query number doesn&#39;t add up to the total number of Google visitors",id:"search-query-number-doesnt-add-up-to-the-total-number-of-google-visitors",children:[],level:3}],level:2},{value:"Plausible Analytics will be listed in your Google account settings",id:"plausible-analytics-will-be-listed-in-your-google-account-settings",children:[],level:2},{value:"Remove the Google Search Console integration",id:"remove-the-google-search-console-integration",children:[],level:2}],p={toc:h};function d(e){var t=e.components,o=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"In 2012, ",(0,a.kt)("a",{parentName:"p",href:"https://webmasters.googleblog.com/2012/03/upcoming-changes-in-googles-http.html"},"Google stopped including")," search terms in the ",(0,a.kt)("inlineCode",{parentName:"p"},"Referer")," header when people click on a Google search. They only send Google as the referrer source instead. This means that Plausible cannot automatically access search terms that lead users to your site."),(0,a.kt)("p",null,"However, you can still access your search terms by setting up your site on Google Search Console. Once you\u2019ve done that, you can enable the Search Console integration in Plausible to get all of your important search results stats under one roof."),(0,a.kt)("p",null,"This integration is privacy-friendly and requires no Google code to be placed on your site. Google is basically just sending us the information they've already collected on their search results."),(0,a.kt)("p",null,"Here\u2019s how you can add your site to Search Console and then integrate the Search Console data into your Plausible dashboard:"),(0,a.kt)("h2",{id:"add-your-site-to-the-google-search-console"},"Add your site to the Google Search Console"),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},'If your site is already set up on Google Search Console, you can skip to the "',(0,a.kt)("strong",{parentName:"em"},(0,a.kt)("a",{parentName:"strong",href:"#allow-plausible-analytics-to-access-your-search-console"},"Allow Plausible Analytics to access your Search Console")),'" step.')),(0,a.kt)("p",null,"Head over to ",(0,a.kt)("a",{parentName:"p",href:"https://search.google.com/search-console/"},"Google Search Console"),' and click on the "',(0,a.kt)("strong",{parentName:"p"},"Start now"),'" button. If you don\u2019t have any sites set up on Google Search Console already, you will be taken straight to the form to add a new domain. Otherwise, you can open the drop down on the top left and select "',(0,a.kt)("strong",{parentName:"p"},"Add property"),'".'),(0,a.kt)("p",null,"You can either create a domain property or a URL prefix property on Google Search Console. Check out ",(0,a.kt)("a",{parentName:"p",href:"https://support.google.com/webmasters/answer/34592?hl=en"},"their documentation")," to understand the difference between these options. Plausible Analytics works with both options, so it\u2019s completely up to you."),(0,a.kt)("img",{alt:"Plausible Analytics",src:(0,s.Z)("img/select-property-type.png")}),(0,a.kt)("h2",{id:"verify-your-ownership-of-the-website"},"Verify your ownership of the website"),(0,a.kt)("p",null,"You should see several options to verify to Google that you do indeed own this website. You\u2019ll either need to be able to add HTML to your site or alternatively, you can add a DNS record to verify your ownership."),(0,a.kt)("p",null,"Follow the provided instructions depending on which verification method you\u2019ve chosen. Once you\u2019ve successfully verified the site, head back to the Plausible Analytics website."),(0,a.kt)("img",{alt:"Plausible Analytics",src:(0,s.Z)("img/verify-ownership.png")}),(0,a.kt)("h2",{id:"allow-plausible-analytics-to-access-your-search-console"},"Allow Plausible Analytics to access your Search Console"),(0,a.kt)("p",null,"Open the settings for your website on ",(0,a.kt)("a",{parentName:"p",href:"https://plausible.io/sites"},"your Plausible Analytics account"),' and go into the settings section called "',(0,a.kt)("strong",{parentName:"p"},"Search Console"),'":'),(0,a.kt)("p",null,'Clicking on the "',(0,a.kt)("strong",{parentName:"p"},"Continue with Google"),'" button will take you through to Google\u2019s authentication flow to get the necessary permissions.'),(0,a.kt)("img",{alt:"Continue with Google",src:(0,s.Z)("img/continue-with-google.png")}),(0,a.kt)("p",null,"Choose your Google account to continue with the authentication. Google will share your name, email address, language preference and profile picture with Plausible Analytics. We've set it so we get the absolutely minimum amount of information possible that Google allows us. "),(0,a.kt)("p",null,"We really only need and use the email address from this. Email address is useful because some Plausible Analytics users have multiple Google accounts so we can remember which one is integrated with the Plausible Analytics site."),(0,a.kt)("img",{alt:"Choose your Google account",src:(0,s.Z)("img/choose-google-account.png")}),(0,a.kt)("p",null,'You then need to grant Plausible Analytics a permission to view your Search Console website data by ticking the "View Search Console data for your verified sites" box in the "Plausible Analytics wants access to your Google account" screen.'),(0,a.kt)("img",{alt:"Tick the View Search Console data for your verified sites box",src:(0,s.Z)("img/confirm-choices.png")}),(0,a.kt)("h2",{id:"select-property-to-pull-keywords-from"},"Select property to pull keywords from"),(0,a.kt)("p",null,"Next up, you are back in Plausible Analytics settings where you should see a select box where you can choose which property from Google Search Console to integrate your Plausible Analytics dashboard with. Properties that start with ",(0,a.kt)("inlineCode",{parentName:"p"},"sc-domain:")," represent domain properties and others are URL prefix properties in Search Console."),(0,a.kt)("p",null,'Once you\u2019ve selected your property, click on the "',(0,a.kt)("strong",{parentName:"p"},"Save"),'" button. At that point, the integration should be fully functional.'),(0,a.kt)("img",{alt:"Choose which property from Google Search Console to integrate with",src:(0,s.Z)("img/choose-property.png")}),(0,a.kt)("h3",{id:"i-get-the-invalid-grant-error"},'I get the "Invalid Grant" error'),(0,a.kt)("p",null,'Google may return the "',(0,a.kt)("strong",{parentName:"p"},"invalid_grant"),'" error message for several reasons:'),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Google has a limit of 50 live tokens. When you try to add the 51st site, the site you added first will be disconnected from your Plausible account and so on. This is a limitation on Google's side so if you have more than 50 different sites in your Search Console, you will need to split them between different Google accounts in order to get them into Plausible at the same time"),(0,a.kt)("li",{parentName:"ul"},"Your permissions for the specific site may have been changed or revoked in your Google account. Please check your Search Console account and make sure you still have the user permission to the site in question"),(0,a.kt)("li",{parentName:"ul"},"Your token is inactive as your account has expired or your site is not active. Please check your Search Console account and make sure you still have the account and are still tracking the site in question correctly"),(0,a.kt)("li",{parentName:"ul"},"You may have changed the permissions or the password in your Google account since you gave us the access. Please make sure to reconnect your Google account again to Plausible with the correct account details")),(0,a.kt)("h3",{id:"i-see-no-search-console-properties-in-my-plausible-account"},"I see no Search Console properties in my Plausible account"),(0,a.kt)("p",null,'Please make sure you tick the "View Search Console data for your verified sites" box on the "Plausible Analytics wants access to your Google account" screen. If you don\'t tick that box, Google will not give us permission to access any of your Search Console properties. '),(0,a.kt)("h2",{id:"check-your-search-query-data-in-plausible-analytics"},"Check your search query data in Plausible Analytics"),(0,a.kt)("p",null,'Look at your site\u2019s "',(0,a.kt)("strong",{parentName:"p"},"Top Sources"),'" stats in your Plausible Analytics dashboard, click on "',(0,a.kt)("strong",{parentName:"p"},"Google"),'" in the referrers list, and you should see the keywords coming through.'),(0,a.kt)("img",{alt:"Google search query data in Plausible Analytics",src:(0,s.Z)("img/google-search-query-referrers.png")}),(0,a.kt)("h3",{id:"i-dont-see-google-search-query-data-in-my-dashboard"},"I don't see Google search query data in my dashboard"),(0,a.kt)("p",null,"Search query data is not live. It is delayed by approximately 24-36 hours even on Google Search Console itself. "),(0,a.kt)("p",null,"So if you go back two days in your Plausible Analytics dashboard and click on Google in the referral sources you should be able to see the search queries for that day. We get the search query data directly from Google Search Console so as soon as they show up there they show up in Plausible Analytics too."),(0,a.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},'Note that "',(0,a.kt)("strong",{parentName:"p"},"Top Sources"),"\" will only show keywords that have sent visitors to your site. We do not display keywords that have had impressions in Google's search results but no clicks to your site. Search phrases and keywords must have at least one click for them to show up in Plausible."))),(0,a.kt)("h3",{id:"search-query-number-doesnt-add-up-to-the-total-number-of-google-visitors"},"Search query number doesn't add up to the total number of Google visitors"),(0,a.kt)("p",null,"Google samples its keyword data heavily. The sampling is why your keyword visitor numbers don\u2019t add up to the total number of visitors from Google. Unfortunately, there\u2019s nothing we can do about the quality of the keyword data. We show exactly the same data that you see in your Search Console."),(0,a.kt)("h2",{id:"plausible-analytics-will-be-listed-in-your-google-account-settings"},"Plausible Analytics will be listed in your Google account settings"),(0,a.kt)("p",null,'You can check if Plausible Analytics is integrated with and has the right permissions to your Search Console properties in your Google account within the section "',(0,a.kt)("strong",{parentName:"p"},"Apps with access to your account"),"\". Here's the ",(0,a.kt)("a",{parentName:"p",href:"https://myaccount.google.com/permissions"},"direct link to that section"),". Here's how it looks."),(0,a.kt)("img",{alt:"Third-party apps with account access",src:(0,s.Z)("img/third-party-apps.png")}),(0,a.kt)("h2",{id:"remove-the-google-search-console-integration"},"Remove the Google Search Console integration"),(0,a.kt)("p",null,"If you'd like to remove the Google Search Console integration, click on the \"",(0,a.kt)("strong",{parentName:"p"},"Unlink Google account"),'" button in the "',(0,a.kt)("strong",{parentName:"p"},"Search Console"),'" section of your website settings.'))}d.isMDXComponent=!0}}]);