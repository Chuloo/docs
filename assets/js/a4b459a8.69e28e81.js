"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9710],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),m=r,h=u["".concat(l,".").concat(m)]||u[m]||d[m]||o;return n?a.createElement(h,i(i({ref:t},c),{},{components:n})):a.createElement(h,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},6955:function(e,t,n){n.d(t,{a:function(){return r},F:function(){return o}});var a=n(7294),r=function(e){e.children,e.color;return a.createElement("span",{style:{color:"#ED8936",fontSize:"0.7rem",fontWeight:"bold",position:"relative",bottom:"4px"}},"REQUIRED")},o=function(e){e.children,e.color;return a.createElement("span",{style:{color:"#718096",fontSize:"0.7rem",fontWeight:"bold",position:"relative",bottom:"4px"}},"optional")}},112:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return p},metadata:function(){return c},toc:function(){return d},default:function(){return m}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=n(6955),s=["components"],l={title:"Events API reference"},p=void 0,c={unversionedId:"events-api",id:"events-api",title:"Events API reference",description:"The Plausible Events API can be used to record pageviews and custom events. This is useful when tracking Android or iOS mobile apps, or for server side tracking.",source:"@site/docs/events-api.md",sourceDirName:".",slug:"/events-api",permalink:"/docs/events-api",editUrl:"https://github.com/plausible/docs/edit/master/docs/events-api.md",tags:[],version:"current",frontMatter:{title:"Events API reference"},sidebar:"someSidebar",previous:{title:"Stats API reference",permalink:"/docs/stats-api"},next:{title:"Site provisioning API reference",permalink:"/docs/sites-api"}},d=[{value:"Endpoints",id:"endpoints",children:[{value:"POST /api/event",id:"post-apievent",children:[{value:"Post body JSON parameters",id:"post-body-json-parameters",children:[],level:4}],level:3}],level:2}],u={toc:d};function m(e){var t=e.components,n=(0,r.Z)(e,s);return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"The Plausible Events API can be used to record pageviews and custom events. This is useful when tracking Android or iOS mobile apps, or for server side tracking."),(0,o.kt)("p",null,"In most cases we recommend installing Plausible via our provided ",(0,o.kt)("a",{parentName:"p",href:"/docs/plausible-script"},"script")," or one of the many\nintegration packages listed ",(0,o.kt)("a",{parentName:"p",href:"/docs/integration-guides"},"here"),". However, if there's no easy way for you to integrate with Plausible, you can still do so by sending events directly to our API."),(0,o.kt)("h2",{id:"endpoints"},"Endpoints"),(0,o.kt)("h3",{id:"post-apievent"},"POST /api/event"),(0,o.kt)("p",null,"Records a pageview or custom event. When using this endpoint, make sure you're sending the correct headers:"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"User-Agent")," is used to determine the user's device",(0,o.kt)("br",null),"\n",(0,o.kt)("strong",{parentName:"p"},"X-Forwarded-For")," is used to determine the client's IP address",(0,o.kt)("br",null),"\n",(0,o.kt)("strong",{parentName:"p"},"Content-Type")," must be either ",(0,o.kt)("em",{parentName:"p"},"application/json")," or ",(0,o.kt)("em",{parentName:"p"},"text/plain")),(0,o.kt)("p",null,"In combination, these two values are used for unique user counting. If you have problems with uniqueness counting, please make sure you are sending\n",(0,o.kt)("strong",{parentName:"p"},"User-Agent")," and ",(0,o.kt)("strong",{parentName:"p"},"X-Forwarded-For")," correctly."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Try it yourself"',title:'"Try',it:!0,'yourself"':!0},'curl -i -X POST https://plausible.io/api/event \\\n  -H \'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.121 Safari/537.36 OPR/71.0.3770.284\' \\\n  -H \'X-Forwarded-For: 127.0.0.1\' \\\n  -H \'Content-Type: application/json\' \\\n  --data \'{"name":"pageview","url":"http://dummy.site","domain":"dummy.site","screen_width":1666}\'\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",202:!0,className:"language-json",metastring:'title="Response 202 Accepted"',title:'"Response','Accepted"':!0},"{}\n")),(0,o.kt)("h4",{id:"post-body-json-parameters"},"Post body JSON parameters"),(0,o.kt)("hr",null),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"domain")," ",(0,o.kt)(i.a,{mdxType:"Required"})),(0,o.kt)("p",null,"Domain name of the site in Plausible"),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"This is the domain name you used when you added your site to your Plausible account. It doesn't need to be an actual domain name, so when adding your mobile app to Plausible, you could insert the mobile app name in the domain name field"))),(0,o.kt)("hr",null),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"name")," ",(0,o.kt)(i.a,{mdxType:"Required"})),(0,o.kt)("p",null,"Name of the event. Can specify ",(0,o.kt)("inlineCode",{parentName:"p"},"pageview")," which is a special type of event in Plausible. All other names will be treated as\ncustom events."),(0,o.kt)("hr",null),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"url")," ",(0,o.kt)(i.a,{mdxType:"Required"})),(0,o.kt)("p",null,"URL of the page where the event was triggered. If the URL contains UTM parameters, they will be extracted and stored. When using the script,\nthis is set to ",(0,o.kt)("inlineCode",{parentName:"p"},"window.location.href")),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"The URL parameter will feel strange in a mobile app but you can manufacture something that looks like a web URL. If you name your mobile app screens like page URLs, Plausible will know how to handle it. So for example, on your login screen you could send something like:  "),(0,o.kt)("p",{parentName:"div"},"event: pageview",(0,o.kt)("br",{parentName:"p"}),"\n","url: app://localhost/login  "),(0,o.kt)("p",{parentName:"div"},"The pathname (/login) is what will be shown as the page value in the Plausible dashboard.  "))),(0,o.kt)("hr",null),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"referrer")," ",(0,o.kt)(i.F,{mdxType:"Optional"})),(0,o.kt)("p",null,"Referrer for this event. When using the script, this is set to ",(0,o.kt)("inlineCode",{parentName:"p"},"document.referrer")),(0,o.kt)("hr",null),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"screen_width")," ",(0,o.kt)(i.F,{mdxType:"Optional"})),(0,o.kt)("p",null,"Width of the screen. When using the script, this is set to ",(0,o.kt)("inlineCode",{parentName:"p"},"window.innerWidth")),(0,o.kt)("hr",null),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"props")," ",(0,o.kt)(i.F,{mdxType:"Optional"})),(0,o.kt)("p",null,"Custom properties for the event. See: ",(0,o.kt)("a",{parentName:"p",href:"https://plausible.io/docs/custom-event-goals#using-custom-props"},"https://plausible.io/docs/custom-event-goals#using-custom-props")),(0,o.kt)("hr",null),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"You can can use GET ",(0,o.kt)("a",{parentName:"p",href:"https://plausible.io/api/health"},"https://plausible.io/api/health")," endpoint to monitor the status of our API"))))}m.isMDXComponent=!0}}]);