"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6864],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=p(n),m=i,h=c["".concat(s,".").concat(m)]||c[m]||d[m]||r;return n?a.createElement(h,l(l({ref:t},u),{},{components:n})):a.createElement(h,l({ref:t},u))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var p=2;p<r;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},6955:function(e,t,n){n.d(t,{a:function(){return i},F:function(){return r}});var a=n(7294),i=function(e){e.children,e.color;return a.createElement("span",{style:{color:"#ED8936",fontSize:"0.7rem",fontWeight:"bold",position:"relative",bottom:"4px"}},"REQUIRED")},r=function(e){e.children,e.color;return a.createElement("span",{style:{color:"#718096",fontSize:"0.7rem",fontWeight:"bold",position:"relative",bottom:"4px"}},"optional")}},810:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return p},metadata:function(){return u},toc:function(){return d},default:function(){return m}});var a=n(7462),i=n(3366),r=(n(7294),n(3905)),l=n(6955),o=["components"],s={title:"Site provisioning API reference"},p=void 0,u={unversionedId:"sites-api",id:"sites-api",title:"Site provisioning API reference",description:"The Plausible Site provisioning API offers a way to create and manage your sites in your Plausible account programmatically.",source:"@site/docs/sites-api.md",sourceDirName:".",slug:"/sites-api",permalink:"/docs/sites-api",editUrl:"https://github.com/plausible/docs/edit/master/docs/sites-api.md",tags:[],version:"current",frontMatter:{title:"Site provisioning API reference"},sidebar:"someSidebar",previous:{title:"Events API reference",permalink:"/docs/events-api"},next:{title:"Change your account email address",permalink:"/docs/change-email"}},d=[{value:"Endpoints",id:"endpoints",children:[{value:"POST /api/v1/sites",id:"post-apiv1sites",children:[{value:"Post body parameters",id:"post-body-parameters",children:[],level:4}],level:3},{value:"DELETE /api/v1/sites/:site_id",id:"delete-apiv1sitessite_id",children:[],level:3},{value:"PUT /api/v1/sites/shared-links",id:"put-apiv1sitesshared-links",children:[{value:"Body parameters",id:"body-parameters",children:[],level:4}],level:3},{value:"PUT /api/v1/sites/goals",id:"put-apiv1sitesgoals",children:[{value:"Body parameters",id:"body-parameters-1",children:[],level:4}],level:3},{value:"DELETE /api/v1/sites/goals/:goal_id",id:"delete-apiv1sitesgoalsgoal_id",children:[{value:"Body parameters",id:"body-parameters-2",children:[],level:4}],level:3}],level:2}],c={toc:d};function m(e){var t=e.components,n=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The Plausible Site provisioning API offers a way to create and manage your sites in your Plausible account programmatically.\nIt currently allows these operations:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create a new site"),(0,r.kt)("li",{parentName:"ul"},"Delete an existing site"),(0,r.kt)("li",{parentName:"ul"},"Find or create a shared link by name"),(0,r.kt)("li",{parentName:"ul"},"Find or create a goal by type and value"),(0,r.kt)("li",{parentName:"ul"},"Delete an existing goal")),(0,r.kt)("p",null,"Each request must be authenticated with an API key using the Bearer Token method. Currently, this API is in private preview and therefore it's not\npossible to acquire an API key through the dashboard. Please ",(0,r.kt)("a",{parentName:"p",href:"https://plausible.io/contact"},"contact us")," to get an API key with permissions for the endpoints listed in this document."),(0,r.kt)("h2",{id:"endpoints"},"Endpoints"),(0,r.kt)("h3",{id:"post-apiv1sites"},"POST /api/v1/sites"),(0,r.kt)("p",null,"Creates a site in your Plausible account."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Try it yourself"',title:'"Try',it:!0,'yourself"':!0},'curl -X POST https://plausible.io/api/v1/sites \\\n  -H "Authorization: Bearer ${TOKEN}" \\\n  -F \'domain="test-domain.com"\' \\\n  -F \'timezone="Europe/London"\'\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",200:!0,className:"language-json",metastring:'title="Response 200 OK"',title:'"Response','OK"':!0},'{\n    "domain": "test-domain.com",\n    "timezone": "Europe/London"\n}\n')),(0,r.kt)("h4",{id:"post-body-parameters"},"Post body parameters"),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"domain")," ",(0,r.kt)(l.a,{mdxType:"Required"})),(0,r.kt)("p",null,"Domain of the site to be created in Plausible. Must be a globally unique, the request will fail if the domain is already taken."),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"timezone")," ",(0,r.kt)(l.F,{mdxType:"Optional"})),(0,r.kt)("p",null,"Timezone name according to the ",(0,r.kt)("a",{parentName:"p",href:"https://www.iana.org/time-zones"},"IANA")," database. Defaults to ",(0,r.kt)("inlineCode",{parentName:"p"},"Etc/UTC")," when left blank."),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"delete-apiv1sitessite_id"},"DELETE /api/v1/sites/:site_id"),(0,r.kt)("p",null,"Deletes a site from your Plausible account along with all of it's data and configuration. The API key must belong to the owner of the site."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Try it yourself"',title:'"Try',it:!0,'yourself"':!0},'curl -X DELETE https://plausible.io/api/v1/sites/test-domain.com \\\n  -H "Authorization: Bearer ${TOKEN}"\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",200:!0,className:"language-json",metastring:'title="Response 200 OK"',title:'"Response','OK"':!0},'{\n    "deleted": "true"\n}\n')),(0,r.kt)("h3",{id:"put-apiv1sitesshared-links"},"PUT /api/v1/sites/shared-links"),(0,r.kt)("p",null,"Finds or creates a shared link for a given ",(0,r.kt)("inlineCode",{parentName:"p"},"site_id")," (use the site domain as the ID). This endpoint is idempotent, it will not fail\nif a shared link with the provided name already exists."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Try it yourself"',title:'"Try',it:!0,'yourself"':!0},'curl -X PUT https://plausible.io/api/v1/sites/shared-links \\\n  -H "Authorization: Bearer ${TOKEN}" \\\n  -F \'site_id="test-domain.com"\' \\\n  -F \'name="Wordpress"\'\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",200:!0,className:"language-json",metastring:'title="Response 200 OK"',title:'"Response','OK"':!0},'{\n    "name": "Wordpress",\n    "url": "https://plausible.io/share/site.com?auth=<random>"\n}\n')),(0,r.kt)("h4",{id:"body-parameters"},"Body parameters"),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"site_id")," ",(0,r.kt)(l.a,{mdxType:"Required"})),(0,r.kt)("p",null,"Id of your site in Plausible."),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"name")," ",(0,r.kt)(l.a,{mdxType:"Required"})),(0,r.kt)("p",null,"Name of the shared link."),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"put-apiv1sitesgoals"},"PUT /api/v1/sites/goals"),(0,r.kt)("p",null,"Finds or creates a goal for a given ",(0,r.kt)("inlineCode",{parentName:"p"},"site_id")," (use the site domain as the ID). This endpoint is idempotent, it will not fail\nif a goal with the provided name already exists."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Try it yourself"',title:'"Try',it:!0,'yourself"':!0},'curl -X PUT https://plausible.io/api/v1/sites/goals \\\n  -H "Authorization: Bearer ${TOKEN}" \\\n  -F \'site_id="test-domain.com"\' \\\n  -F \'goal_type="event"\' \\\n  -F \'event_name="Signup"\'\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",200:!0,className:"language-json",metastring:'title="Response 200 OK"',title:'"Response','OK"':!0},'{\n    "domain": "test-domain.com",\n    "id": "1",\n    "goal_type": "event",\n    "event_name": "Signup",\n    "page_path": null\n}\n')),(0,r.kt)("h4",{id:"body-parameters-1"},"Body parameters"),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"site_id")," ",(0,r.kt)(l.a,{mdxType:"Required"})),(0,r.kt)("p",null,"Id of your site in Plausible."),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"goal_type")," ",(0,r.kt)(l.a,{mdxType:"Required"})),(0,r.kt)("p",null,"Type of your goal, accepts only one of the following values: ",(0,r.kt)("inlineCode",{parentName:"p"},"event")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"page")," "),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"event_name")," ",(0,r.kt)(l.a,{mdxType:"Required"})," only if ",(0,r.kt)("em",{parentName:"p"},"goal_type")," is set to ",(0,r.kt)("inlineCode",{parentName:"p"},"event")),(0,r.kt)("p",null,"Actual value of your the event name of your goal "),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"page_type")," ",(0,r.kt)(l.a,{mdxType:"Required"})," only if ",(0,r.kt)("em",{parentName:"p"},"goal_type")," is set to ",(0,r.kt)("inlineCode",{parentName:"p"},"page")),(0,r.kt)("p",null,"Actual value of the page path of your goal, also accepts wildcards for type ",(0,r.kt)("inlineCode",{parentName:"p"},"page")," "),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"delete-apiv1sitesgoalsgoal_id"},"DELETE /api/v1/sites/goals/:goal_id"),(0,r.kt)("p",null,"Deletes a goal from your Plausible account. The API key must belong to the owner of the site. The site must owned by the current user."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Try it yourself"',title:'"Try',it:!0,'yourself"':!0},'curl -X DELETE https://plausible.io/api/v1/sites/goals/1 \\\n  -H "Authorization: Bearer ${TOKEN}" \\\n  -F \'site_id="test-domain.com"\'\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",200:!0,className:"language-json",metastring:'title="Response 200 OK"',title:'"Response','OK"':!0},'{\n    "deleted": "true"\n}\n')),(0,r.kt)("h4",{id:"body-parameters-2"},"Body parameters"),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"site_id")," ",(0,r.kt)(l.a,{mdxType:"Required"})),(0,r.kt)("p",null,"Id of your site in Plausible."),(0,r.kt)("hr",null))}m.isMDXComponent=!0}}]);