"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4654],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(n),m=o,h=p["".concat(l,".").concat(m)]||p[m]||d[m]||i;return n?a.createElement(h,r(r({ref:t},c),{},{components:n})):a.createElement(h,r({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var u=2;u<i;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},1567:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return u},metadata:function(){return c},toc:function(){return d},default:function(){return m}});var a=n(7462),o=n(3366),i=(n(7294),n(3905)),r=n(4996),s=["components"],l={title:"Custom event goals"},u=void 0,c={unversionedId:"custom-event-goals",id:"custom-event-goals",title:"Custom event goals",description:"If you use the Custom Events feature, then these count towards your billable monthly pageviews.",source:"@site/docs/custom-event-goals.md",sourceDirName:".",slug:"/custom-event-goals",permalink:"/docs/custom-event-goals",editUrl:"https://github.com/plausible/docs/edit/master/docs/custom-event-goals.md",tags:[],version:"current",frontMatter:{title:"Custom event goals"},sidebar:"someSidebar",previous:{title:"Pageview goals",permalink:"/docs/pageview-goals"},next:{title:"Outbound link click tracking",permalink:"/docs/outbound-link-click-tracking"}},d=[{value:"1. Trigger custom events with JavaScript on your site",id:"1-trigger-custom-events-with-javascript-on-your-site",children:[],level:2},{value:"2. Create a custom event goal in your Plausible Analytics account",id:"2-create-a-custom-event-goal-in-your-plausible-analytics-account",children:[],level:2},{value:"Using custom props",id:"using-custom-props",children:[],level:2},{value:"Code example for tracking link clicks",id:"code-example-for-tracking-link-clicks",children:[{value:"1. Add a <code>data-analytics</code> attribute tag on the link you want to track",id:"1-add-a-data-analytics-attribute-tag-on-the-link-you-want-to-track",children:[],level:3},{value:"2. Add the JavaScript that will be sending the link click events to Plausible",id:"2-add-the-javascript-that-will-be-sending-the-link-click-events-to-plausible",children:[],level:3}],level:2},{value:"Code example for tracking form button submit events",id:"code-example-for-tracking-form-button-submit-events",children:[{value:"1. Add a <code>data-analytics</code> attribute tag on a submit button inside a form",id:"1-add-a-data-analytics-attribute-tag-on-a-submit-button-inside-a-form",children:[],level:3},{value:"2. Add the JavaScript that will be sending the form submit events to Plausible",id:"2-add-the-javascript-that-will-be-sending-the-form-submit-events-to-plausible",children:[],level:3}],level:2},{value:"Contact Form 7 plugin on WordPress",id:"contact-form-7-plugin-on-wordpress",children:[],level:2}],p={toc:d};function m(e){var t=e.components,n=(0,o.Z)(e,s);return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"If you use the Custom Events feature, then these count towards your billable monthly pageviews."))),(0,i.kt)("p",null,"If you want to track custom event goals like button clicks or form completions, you have to trigger these custom events from your website using JavaScript. Here are the steps you need to take to do that."),(0,i.kt)("h2",{id:"1-trigger-custom-events-with-javascript-on-your-site"},"1. Trigger custom events with JavaScript on your site"),(0,i.kt)("p",null,"First, make sure your tracking setup includes the second line as shown below:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<script defer data-domain="<yourdomain.com>" src="https://plausible.io/js/script.js"><\/script>\n<script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }<\/script>\n')),(0,i.kt)("p",null,"This snippet creates a global function called ",(0,i.kt)("inlineCode",{parentName:"p"},"plausible")," which can be used to trigger custom events from anywhere in your code."),(0,i.kt)("p",null,"Here\u2019s what triggering a custom event looks like:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"plausible('Signup')\n")),(0,i.kt)("p",null,"The event name can be anything. As a second parameter, you can also send an object with options. The supported options at the moment are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"callback")," \u2013 a function that is called once the event is logged successfully."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"props")," \u2013 an object with custom properties for the event")),(0,i.kt)("p",null,"This is the whole extent of the API. It's intentionally very slim so as to keep the SDK small and quick to load."),(0,i.kt)("p",null,"If you want to trigger form submissions, button clicks etc. you need to implement the code for that yourself. This is an example of code we use to track custom events (trial signups) on our own website. We have listed few other code examples further down this page."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"registerForm.addEventListener('submit', function(e) {\n  e.preventDefault();\n  setTimeout(submitForm, 1000);\n  var formSubmitted = false;\n\n  function submitForm() {\n    if (!formSubmitted) {\n      formSubmitted = true;\n      registerForm.submit();\n    }\n  }\n\n  plausible('Signup', {callback: submitForm});\n})\n")),(0,i.kt)("h2",{id:"2-create-a-custom-event-goal-in-your-plausible-analytics-account"},"2. Create a custom event goal in your Plausible Analytics account"),(0,i.kt)("p",null,"When you start sending custom events to Plausible Analytics, they won\u2019t show up automatically. You\u2019ll have to configure the goal for the conversion numbers to show up."),(0,i.kt)("p",null,"To configure a goal, go to ",(0,i.kt)("a",{parentName:"p",href:"/docs/website-settings"},"your website\u2019s settings"),' in your Plausible Analytics account and visit the "',(0,i.kt)("strong",{parentName:"p"},"Goals"),'" section. You should see an empty list with a prompt to add a goal.'),(0,i.kt)("img",{alt:"Add your first goal",src:(0,r.Z)("img/goal-conversions.png")}),(0,i.kt)("p",null,'Click on the "',(0,i.kt)("strong",{parentName:"p"},"+ Add goal"),'" button to go to the goal creation form.'),(0,i.kt)("p",null,"Select ",(0,i.kt)("inlineCode",{parentName:"p"},"Custom event")," as the goal trigger and enter the name of the custom event you are triggering. The names must be an exact match to the one on your site for the conversions to show up in your analytics dashboard."),(0,i.kt)("img",{alt:"Add your custom event goal",src:(0,r.Z)("img/add-custom-event-goal.png")}),(0,i.kt)("p",null,'Next, click on the "',(0,i.kt)("strong",{parentName:"p"},"Add goal"),'" button and you\u2019ll be taken back to the Goals page. When you navigate back to your Plausible Analytics dashboard, you should see the number of visitors who triggered the custom event. Goal conversions are listed at the very bottom of the dashboard.'),(0,i.kt)("h2",{id:"using-custom-props"},"Using custom props"),(0,i.kt)("p",null,"Custom properties can be attached to events to capture dynamic elements and to further break down goal conversions. You can use custom properties to create your custom metrics to collect and analyze data that Plausible doesn\u2019t automatically track."),(0,i.kt)("p",null,"You can then filter and sort your goals by custom event properties in your Plausible dashboard. For those coming from Google Analytics, custom properties are roughly the same concept as ",(0,i.kt)("em",{parentName:"p"},"custom dimensions")," in GA."),(0,i.kt)("p",null,"For example, in addition to tracking file downloads you might want to know which supported download method your visitors are using. Instead of creating separate goals for each download method, you can send a custom property instead:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"plausible('Download', {props: {method: 'HTTP'}})\n")),(0,i.kt)("p",null,"This way you can neatly track total downloads and also break them down by the method without cluttering your dashboard. Here's how it will look like:"),(0,i.kt)("img",{alt:"Custom property breakdown",src:(0,r.Z)("img/custom-property-breakdown.png")}),(0,i.kt)("p",null,"Want to have multiple custom properties for the same event? You can do it like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"plausible('Download', {props: {method: 'HTTP', Region: 'Europe'}})\n")),(0,i.kt)("p",null,"The number of custom properties you can add per event is unlimited. And the names can be anything that you want. In our example, there are 4 properties that have been set up for segmenting: ",(0,i.kt)("inlineCode",{parentName:"p"},"Version, Region, OS, Method"),"."),(0,i.kt)("p",null,"Custom properties only accepts scalar values such as strings, numbers and booleans. Data structures such as objects, arrays etc. are not accepted."),(0,i.kt)("p",null,"Custom properties will show up automatically on your dashboard as long as you've added the goal itself. You don't need to manually add them in your settings."),(0,i.kt)("p",null,"Plausible will display ",(0,i.kt)("inlineCode",{parentName:"p"},"(none)")," in your dashboard when you send a custom property key with no value, or ",(0,i.kt)("inlineCode",{parentName:"p"},"null"),"/",(0,i.kt)("inlineCode",{parentName:"p"},"undefined")," as a value."),(0,i.kt)("p",null,"Note that you must ensure that no personally identifiable information (PII) is sent to Plausible Analytics with custom properties. PII is information that could be used on its own to identify, contact, or precisely locate an individual. This includes:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"full names or usernames"),(0,i.kt)("li",{parentName:"ul"},"email addresses"),(0,i.kt)("li",{parentName:"ul"},"mailing addresses"),(0,i.kt)("li",{parentName:"ul"},"phone numbers"),(0,i.kt)("li",{parentName:"ul"},"credit card information"),(0,i.kt)("li",{parentName:"ul"},"passport numbers"),(0,i.kt)("li",{parentName:"ul"},"precise locations"),(0,i.kt)("li",{parentName:"ul"},"IP addresses"),(0,i.kt)("li",{parentName:"ul"},"pseudonymous cookie IDs, advertising IDs or other pseudonymous end user identifiers")),(0,i.kt)("h2",{id:"code-example-for-tracking-link-clicks"},"Code example for tracking link clicks"),(0,i.kt)("h3",{id:"1-add-a-data-analytics-attribute-tag-on-the-link-you-want-to-track"},"1. Add a ",(0,i.kt)("inlineCode",{parentName:"h3"},"data-analytics")," attribute tag on the link you want to track"),(0,i.kt)("p",null,"When you want to track a simple link click:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<a href="/register" data-analytics=\'"Register"\'>Register</a>\n')),(0,i.kt)("p",null,"Or if you want to track a link click with custom properties:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<a href="/register" data-analytics=\'"Register", {"props":{"plan":"Navigation","location":"footer"}}\'>Register</a>\n')),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Do watch the quotes! The ",(0,i.kt)("inlineCode",{parentName:"p"},"data-analytics")," tag value should have both ",(0,i.kt)("strong",{parentName:"p"},"single and double quotes")," as shown above."))),(0,i.kt)("h3",{id:"2-add-the-javascript-that-will-be-sending-the-link-click-events-to-plausible"},"2. Add the JavaScript that will be sending the link click events to Plausible"),(0,i.kt)("p",null,"To be able to make use of the ",(0,i.kt)("inlineCode",{parentName:"p"},"data-analytics")," tags and track the link clicks, you need to add the code below. You should insert this just before the closing ",(0,i.kt)("inlineCode",{parentName:"p"},"</body>")," tag:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"<script>\n  let links = document.querySelectorAll(\"a[data-analytics]\");\n  for (var i = 0; i < links.length; i++) {\n      links[i].addEventListener('click', handleLinkEvent);\n      links[i].addEventListener('auxclick', handleLinkEvent);\n  }\n\n  function handleLinkEvent(event) {\n      var link = event.target;\n      var middle = event.type == \"auxclick\" && event.which == 2;\n      var click = event.type == \"click\";\n      while (link && (typeof link.tagName == 'undefined' || link.tagName.toLowerCase() != 'a' || !link.href)) {\n          link = link.parentNode;\n      }\n      if (middle || click) {\n          let attributes = link.getAttribute('data-analytics').split(/,(.+)/);\n          let events = [JSON.parse(attributes[0]), JSON.parse(attributes[1] || '{}')];\n          plausible(...events);\n      }\n      if (!link.target) {\n          if (!(event.ctrlKey || event.metaKey || event.shiftKey) && click) {\n              setTimeout(function () {\n                  location.href = link.href;\n              }, 150);\n              event.preventDefault();\n          }\n      }\n  }\n<\/script>\n")),(0,i.kt)("h2",{id:"code-example-for-tracking-form-button-submit-events"},"Code example for tracking form button submit events"),(0,i.kt)("h3",{id:"1-add-a-data-analytics-attribute-tag-on-a-submit-button-inside-a-form"},"1. Add a ",(0,i.kt)("inlineCode",{parentName:"h3"},"data-analytics")," attribute tag on a submit button inside a form"),(0,i.kt)("p",null,"When you want to track a simple form submit event:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<form>\n    ...\n    <button type="submit" data-analytics=\'"Contact"\'>Send Message...</button>\n</form>\n')),(0,i.kt)("p",null,"Or if you want to track a form submit event with custom properties:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<form>\n    ...\n    <button type="submit" data-analytics=\'"Contact", {"props":{"page":"home"}}\'>Send Message...</button>\n</form>\n')),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Do watch the quotes! The ",(0,i.kt)("inlineCode",{parentName:"p"},"data-analytics")," tag value should have both ",(0,i.kt)("strong",{parentName:"p"},"single and double quotes")," as shown above."))),(0,i.kt)("h3",{id:"2-add-the-javascript-that-will-be-sending-the-form-submit-events-to-plausible"},"2. Add the JavaScript that will be sending the form submit events to Plausible"),(0,i.kt)("p",null,"To be able to make use of the ",(0,i.kt)("inlineCode",{parentName:"p"},"data-analytics")," tag and track the form submit events, you need to add the code below. You should insert this just before the closing ",(0,i.kt)("inlineCode",{parentName:"p"},"</body>")," tag:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"<script>\n  let buttons = document.querySelectorAll(\"button[data-analytics]\");\n  for (var i = 0; i < buttons.length; i++) {\n      buttons[i].addEventListener('click', handleFormEvent);\n      buttons[i].addEventListener('auxclick', handleFormEvent);\n  }\n\n  function handleFormEvent(event) {\n      event.preventDefault();\n      let attributes = event.target.getAttribute('data-analytics').split(/,(.+)/);\n      let events = [JSON.parse(attributes[0]), JSON.parse(attributes[1] || '{}')];\n      plausible(...events);\n      setTimeout(function () {\n          event.target.form.submit();\n      }, 150);\n  }\n<\/script>\n")),(0,i.kt)("h2",{id:"contact-form-7-plugin-on-wordpress"},"Contact Form 7 plugin on WordPress"),(0,i.kt)("p",null,"Here's an example of the code you need to insert if you're using the Contact Form 7 plugin on WordPress and want to see the number of visitors who use the contact form. In this example, there are two contact forms on two different pages and this is the code you should insert in the ",(0,i.kt)("inlineCode",{parentName:"p"},"head")," section:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"<script>\ndocument.addEventListener( 'wpcf7mailsent', function( event ) {\n  if ( '1174' == event.detail.contactFormId ) {\n    plausible('FormProject')}\n  if ( '464' == event.detail.contactFormId ) {\n    plausible('FormContact')}\n}, false );\n<\/script>\n")))}m.isMDXComponent=!0}}]);